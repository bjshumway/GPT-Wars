<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Add this androidjs.js file to your html file to get the functionality of android js -->
<!-- COMMENTED OUT UNTIL WE NEED IT
<script type="text/javascript" src = "../assets/androidjs.js"></script>
-->


<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</link>
<link rel="stylesheet" href="../assets/main.css">
</link>
<script src="../assets/architypes.js"></script>
<script src="../assets/user-obj.js"></script>
<script src="../assets/gpt-api.js"></script>
<script src="../assets/stablediffusion-api.js"></script>
<script src="../assets/main.js"></script>
<script src="../assets/google-authenticate.js"></script>
<script src="../assets/character-book.js"></script>
<script src="../assets/battle.js"></script>
<script src="../assets/elevenlabs.js"></script>
<script src="../assets/imageUpload.js"></script>
<script src="https://accounts.google.com/gsi/client" async defer></script>


<!--Disabled for now-->
<!--<script src="../assets/playht-api.js"></script>
<script src="../assets/evoke-api.js"></script>
-->


<link rel="icon" href="../assets/images/Martz90-Circle-Books.ico?v=2" />


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  var delay = (time) => new Promise((resolve, reject) => setTimeout(resolve, time))

  async function loadMod() {
    window.mod = await import("https://deno.land/x/gpt_2_3_tokenizer@v0.0.1/mod.js");
    //console.log("encoding hw", mod.encode("hello world"))    
  }
  loadMod();

</script>

</head>
<body>

<!-- This is the background div for the logo that appears before the game starts "AI Forge"-->
<div id="splash-backscreen"></div>
<!-- This is the logo that appears on the splash screen-->
<div id="splash-logo"></div>


<!-- This is the "go-back" button that appears when you're paginating in the book-->
<button id="back-page-btn"></button>


<!-- Login -->
<div id="login-div">
  <p class="input-field">Username</p>
    <input type="text" id="login-username">
  <p class="input-field" >Password</p>
    <input type="password" id="login-password">
    <p style="text-align: center;">
      <button id="login-button">Login</button>
    </p>  
    <p style="text-align: center;">
    <a href="#" class="link">Forgot Password</a>
  </p>
  <p style="text-align: center;">
    <a href="http://www.aiforge.io/subscribe" class="link">Register</a>
  </p>
  <div id="google-container">
    <div id="buttonDiv" style="display: inline-block;"></div>
  </div> 
</div>

<!-- Create Account -->
<div id="create-account">
  <p><center>Welcome to GPT-Wars!</center></p>
  <p><center>Create an account to get started</center></p>

  <p class="input-field">Username</p>
    <input type="text" id="register-username">
  <p class="input-field">Password</p>
    <input type="password" id="register-password-1">
  <p class="input-field">Re-type Password</p>
    <input type="password" id="register-password-2">
    <p style="text-align: center;">
      <button id="register-button">Register</button>
    </p>
    <div class="google-container">
    - Or register via google -
    <br />
    <div id="buttonDiv2" style="display: inline-block;"></div>
  </div> 
</div>


<!-- Choose your character -->
<div id="choose-your-character"></div>


<!--This is the settings div (currently not used)-->
<div id="apply-settings">
   <div><input id="voice-audio-on-off" type="checkbox"></input> Voice Audio (not yet implemented)</div>
   <div><input id="reading-speed" type="checkbox"></input> Reading Speed (not yet implemented)</div>
</div>


<!-- This is the pop-up div that shows the reason why you won or lost a battle -->
<div id="show-reason-outcome"></div>

<!-- This div appears when you have more than 3 powerups. It asks you which powerup you want to replace-->
<div id="replace-existing-powerup"></div>

<!-- This is the div for the "Loading" popup that occurs-->
<div class="loading-container">
  <div class="spinner">
    <div class="spinner-item"></div>
    <div class="spinner-item"></div>
    <div class="spinner-item"></div>
    <div class="spinner-item"></div>
    <div class="spinner-item"></div>
  </div>
  <div class="loading-spinner-text" style="color: navajowhite;width: 100%;text-align: center;padding-bottom: 2vh;">
    Loading
  </div>
</div>

<!-- This is the character book that we use to look at characters we've built. Currently supports up to 9 characters-->
<div id="char-book">
  <div id="char-read-view">
    <div class="char-nav-buttons"">
      <span class="char-slot">Slot 1/9</span>
      <span class="prev-char">&lt;</span>
      <span class="next-char">&gt;</span>
    </div> 
    <p id="char-read-name">Mr. Doodle</p>
    <img id="char-prof-pic" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png">
    <p id="char-read-arch">Super Cool Badass Guy</p>
    <p id="char-stats">Lv 2, Exp 0 - Power Rating 1250</p>
    <p id="char-read-desc">Long Description Here. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </p>
    <!--<button href="#" id="view-previous-stories" onclick="alert('Not Yet Implemented')">View Stories</button>-->
    <button href="#" style="display: relative;" id="delete-character">Delete Character</button>
  </div> 
    <div id="character-create-new" class="signpost">
      Create New Character!
    </div>
  </div>





<!-- This is the "main book" for character creation, picking opponenet, loading, story, picking a powerup, etc.-->
<div id="book" class="book">
  <div id="p0" class="paper flipped" style="z-index: 0;">
    <div class="back">
      <div id='p0-content' class="text-screen back-content"">
          <button id="login">Login</button>        
          <button id="logout">Logout</button>        
          <p id="title">
          GPT Wars
        </p>
        <div id="battle" class="signpost">
          Battle!
        </div>
        <div id="characters" class="signpost">
          Characters
        </div>
        <div id="settings" class="signpost">
          Settings
        </div>

        <button id="start-button">Start Your Journey</button>
      </div>
    </div>
  </div>
  <div id="p1" class="paper" style="z-index: 9;">
    <div class="back">
      <div id='p1-content' class="text-screen back-content"">
        &nbsp;&nbsp;&nbsp;Deep in the cosmos of space a tournament is brewing. 
        Heroes and villains from all genres (fantasy, sci-fi, anime, action, comedy) travel from 
        the far reaches to prove their might!
        <img src="../assets/images/cosmic-arena.png" style="width:100%;margin-top:2vh;"></img>
        <button id="go-to-intro2" class="continue-button" style="margin-top:2vh;" snd="pageturn" style="margin-top: 10vh;">Continue!</button>        
      </div>
    </div>
  </div>
  <div id="p2" class="paper" style="z-index: 8;">
    <div class="back">
      <div id='p2-content' class="text-screen back-content"">
        &nbsp;&nbsp;&nbsp;Hello! I am "The Story Teller" - an AI powered voice, writer, and illustrator built from cutting-edge tech. <br />&nbsp&nbsp&nbspIn 'AI Story Battles' you create a custom character, which I then write into thrilling tales of heroism, tragedy and valor.<br />&nbsp&nbsp&nbspHow you write your character matters. If your character is a wizard, it will use magic. If it's a detective, it will employ its powers of deduction.&nbsp&nbsp&nbspThe stronger your character's depiction, the greater chances of success.<br />&nbsp&nbsp&nbspGet ready for some epic wacky fights!
        <br />
        <button class="continue-button" id="go-to-intro-tournament"snd="pageturn">Continue!</button>        
      </div>
    </div>
  </div>

  <!--
  <div id="p3" class="paper" style="z-index: 7;">
    <div class="back">
      <div id='p3-content' class="text-screen back-content"">
        &nbsp;&nbsp;&nbsp;You may enter The Grand Tournament to go head-to-head against characters crafted by your friends or other players.  May the most epic character win!
        <img src="../assets/images/tournament.jpg" id="playoffs-img"></img>
        <button id="go-to-intro-ladder" class="continue-button" snd="pageturn" style="margin-top: 10vh;">Continue!</button>        
      </div>
    </div>
  </div>



  <div id="p4" class="paper" style="z-index: 6;">
    <div class="back">
      <div id='p4-content' class="text-screen back-content"">
        &nbsp;&nbsp;&nbsp;Or, test your character's strength against harder and harder combatants! Rewrite your character as needed to graduate to the next power level.
        <div style="text-align:center"><img src="../assets/images/test-strength.jpg" id="high-striker-img"></img></div>
        <button id="go-to-architype-intro" class="continue-button" snd="pageturn" style="margin-top: 2vh;">Continue!</button>
      </div>
    </div>
  </div>
  --!>

  <div id="p5" class="paper" style="z-index: 5;">
    <div class="back">
      <div id='p5-content' class="text-screen back-content"">
        <span id="teach-architype">&nbsp;&nbsp;&nbsp;First thing's first, character creation! We'll begin with the archetype. This can be vague, such as "Hero" or "Vigilante", less vague such as "Ice Dragon" or "Space Marine",
        or something specific like "Time-Traveling Detective with a Pet T-Rex." - Whatever strikes your fancy! Don't worry, you can adjust your character at any time.</span>
        <textarea id="description-architype"     class="classic-input two-lines"></textarea>
        <button class="continue-button" snd="pageturn" id="suggest-architype" style="margin-top: 2vh;"><span class="dice">ðŸŽ²</span>Random Suggestion</button>
        <button class="continue-button" snd="pageturn" style="margin-top: 2vh;" disabled id="comment-on-architype">Continue!</button>        
      </div>
    </div>
  </div>
  <div id="p5-1" class="paper" style="z-index: 4;">
    <div class="back">
      <div id='p5-1-content' class="text-screen back-content"">
        <p id="quick-architype-comment"><br /><br />Loading response (can take up to a minute)</p>
        <button class="continue-button" snd="pageturn" id="try-another-architype" style="margin-top: 8vh;">Try Something Else</button>
        <button class="continue-button" snd="pageturn" id="go-to-name-creation" style="margin-top: 2vh;">Cool, Continue!</button>        
      </div>
    </div>
  </div>
  <div id="p6" class="paper" style="z-index: 4;">
    <div class="back">
      <div id='p6-content' class="text-screen back-content"">
        <br /><br /><br />Now, give your character a name
        <br />
        <input id="char-name"     class="classic-input" type="text">
        <br />
          <span>Gender: 
            <select id="char-gender">
              <option value="">leave blank</option>
              <option value="Female">Female</option>
              <option value="Male">Male</option>
              <option value="Other">Other</option>
            </select></span><br />
          <span>Attribute: <select id="char-attribute" class="char-desc-choice"></select></span><br />
          <span>Skill:     <select id="char-skill" class="char-desc-choice"></select></span><br />
          <span>Resource:  <select id="char-resource" class="char-desc-choice"></select></span><br />
        <button class="continue-button" snd="pageturn" id="suggest-name" style="margin-top: 2vh;"><span class="dice">&#127922;</span>Suggest Name</button>
        <button class="continue-button" snd="pageturn" id="generate-description" style="margin-top: 10vh;" disabled>Continue!</button>        
      </div>
    </div>
  </div>  
  <div id="p7" class="paper" style="z-index: 3;">
    <div class="back">
      <div id='p7-content' class="text-screen back-content">
        <p id="char-name2"></p>
        <p id="describe-help">&nbsp;&nbsp;&nbsp;Now is the most important part, your character's description - This affects everything regarding the stories I generate!</p>
        <p>&nbsp;&nbsp;&nbsp;My role as the story teller is not to arbitrarily pick a winner, but to tell the most epic story.</p>
        <p>&nbsp;&nbsp;&nbsp;This means that the more epic, interesting, powerful your character description, the more likely his success in battle.</p>
        <p>&nbsp;&nbsp;&nbsp;To start I will generate a description for you (using the name and architype), but you may rewrite it to your heart's content. </p>
        <button class="continue-button" id="continue-to-writing-the-description" snd="pageturn">Continue!</button>
      </div>
    </div>
  </div>
  <div id="p8" class="paper" style="z-index: 2;">
    <div class="back">
      <div  id="p8-content" class="text-screen back-content">
        <p id="char-name3"></p>
        <textarea id="describe-text-area" class="describe-text-area"></textarea>
        <button class="continue-button" snd="pageturn" id="go-to-description-comment">Continue!</button>
      </div>
    </div>
  </div>
  <!--
  <div id="p8-1" class="paper" style="z-index: 4;">
    <div class="back">
      <div id='p8-1-content' class="text-screen back-content">
      <p>Okay, we'll start your character off with a power level of 5. Each time he wins a battle, the power level goes up. - loses, goes down.</p><br />
      <p>Now for the last part of your training. It's time for your first battle! Click "continue" - to choose an opponent.</p>
      <button class="continue-button" snd="pageturn" id="go-to-pick-first-opponent" style="margin-top: 2vh;">Continue!</button>        
      </div>
    </div>
  </div>
  --!>
  <div id="p9" class="paper" style="z-index: 1;">
    <div class="back">
      <div id="p9-content" class="text-screen back-content">
        <p>
        <p class="call-to-action-description">Choose your opponent!</p>
        <div class="w3-container">
          <div onclick="openAccordian('opponent-choose-1')" class="w3-button w3-block w3-black ">
            <span class="accordian-title">Merlin</span>
            <img src="../assets/images/merlin1.png" style="width:100%;display:block;">
          </div>
          <div id="opponent-choose-1" class="w3-hide w3-animate-zoom w3-inside">
            <div class="opponent-description">Merlin is an icon of strength and wisdom, with many around King Arthur\'s court depending on his guidance. He is robed in purple and gold, with a crown of emerald on his head. He wields a staff carved of wood and gold, that crackles with energy from powerful spells. His voice is deep and powerful, and his words touch the soul of all who hear him. His mastery of the mystical arts of alchemy and divination are renowned and his counsel is sought after by noblemen alike, for his wisdom and insight cut through the darkness like a ray of light.</div>
            <button class="continue-button load-first-story" data-character-name="Merlin" snd="click">Choose!</button><br /><br />
          </div>
          <br />
          <div onclick="openAccordian('opponent-choose-2')" class="w3-button w3-block w3-black" style="text-align-last:center;">
            <span class="accordian-title">Staria Stormrider</span>    
            <img src="../assets/images/staria_stormrider.png" style="width:100%;display:block;">
          </div>
          <div id="opponent-choose-2" class="w3-hide w3-animate-zoom w3-inside">
            <div class="opponent-description">Staria Stormrider is a professional bounty hunter in an advanced, post-apocalyptic society. Her striking appearance reflects her formidable presence. Her fiery red hair hangs to her waist and frames a commanding face of intimidating steel blue eyes. She wears fiery leather battle armor that is tough enough to withstand the rigors of her occupation. Her weapon of choice is a custom-designed single-handed plasma rifle, powerful enough to knock down a giant robot. Staria's creative techniques befuddle her team members who accuse her of going rogue. She manages to complete high paying jobs while still championing the needy.</div>
            <button class="continue-button load-first-story" data-character-name="Staria Stormrider" snd="click">Choose!</button><br /><br />
          </div>
          <br />
          <div onclick="openAccordian('opponent-choose-3')" class="w3-button w3-block w3-black " style="text-align-last:center;">
            <span class="accordian-title">Agent Steele</span>    
            <img src="../assets/images/agent_steele.png" style="width:100%;display:block;">
          </div>
          <div id="opponent-choose-3" class="w3-hide w3-animate-zoom w3-inside">
            <div class="opponent-description">Agent Steele is a young and troubled detective. His father is a ring leader of the criminal syndicate "Tantulus" known for corrputing politicians to siphon money out of government. He is tall, lean and strong, with tanned skin, sharp cheekbones and an angular jaw. His quick wit, vast knowledge and skills as a detective have made him feared and respected - even by his father. Agent Steele may be young and troubled, but he has the skills required to solve any case, no matter the degree of difficulty.</div>
            <button class="continue-button load-first-story" data-character-name="Agent Steele" snd="click">Choose!</button>
          </div>
        </div>
      </div>
    </div>
  </div>
<div id="p10" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p10-content" class="text-screen back-content">
        
        <div id="loading-page" style="" class="come-from-right">
          <div style="
            position: fixed;
            top: 4%;
            width: 95%;
            left: 2.5%;
            text-align: center;
          "><span style="
            color: white;
            font-size: 3vh;
          ">Generating story/images... </span>
          </div>
        <div class="meter">
          <span></span>
        </div>
        </div>
        <span id = "remaining-time">This usually takes 60 seconds</span>        
        <!-- source: https://codepen.io/chriscoyier/pen/eYBOvJB?editors=0110 --!>
        </div>
    </div>
  </div>
  <div id="p11-1" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p11-1-content" class="text-screen back-content">
      </div>
    </div>
  </div>
  <div id="p11-2" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p11-2-content" class="text-screen back-content">
      </div>
    </div>
  </div>
  <div id="p11-3" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p11-3-content" class="text-screen back-content">
      </div>
    </div>
  </div>
  <div id="p11-4" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p11-4-content" class="text-screen back-content">
      </div>
    </div>
  </div>
  <div id="p12" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p12-content" class="text-screen back-content">
        <center><p id="battle-finished-top"><b>Congratulations!</b><br>You have survived your first battle
          <b>Your character was defeated</b></p>
          <a href="#" id="link-to-show-reason-outcome">Why?</a>
          <p id="show-new-rating">New Rating 1188 <span id="rating-adjustment-points">-12 pts</span></p>
          <b>Choose a Powerup</b>
          <div class="w3-container">
            <div onclick="openAccordian('powerup-1')" class="w3-button w3-block w3-black ">
              <span class="accordian-title">Super Sonic Speed</span>
            </div>
            <div id="powerup-1" class="w3-hide w3-animate-zoom w3-inside">
              <div class="powerup-description">
                As a result you gained x,y,z etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc. 
              </div>
              <button class="continue-button" id="powerup-choose-1">Choose!</button><br /><br />
            </div>
            <br />
            <div onclick="openAccordian('powerup-2')" class="w3-button w3-block w3-black " style="text-align-last:center;">
              <span class="accordian-title">Farmer Joe</span>    
            </div>
            <div id="powerup-2" class="w3-hide w3-animate-zoom w3-inside">
              <div class="powerup-description">
                As a result you gained x,y,z etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc.  etc. 
              </div>
              <button class="continue-button" id="powerup-choose-2">Choose!</button><br /><br />
            </div>
          </div>
          <button class="continue-button" id="powerup-choose-none">Skip Powerup</button>
        </center>
      </div>
    </div>
  </div>

  <div id="p13" class="paper" style="z-index: 10;">
    <div class="back">
      <div id="p13-content" class="text-screen back-content">
        '<center><b>You're on your way</b><br /><br />More characters and powerups to come!<br /><br />But first create an account:<br /><br />'
        <button class="continue-button" id="first-battle-login">Create Account<br />&amp; Save Progress!</button>
      </div>
    </div>
  </div>  
</div>

</body>
</head>
